kind: manual

sources:
- kind: git_tag
  url: github:megous/linux.git
  track: orange-pi-5.10
  ref: orange-pi-5.10-20210226-1254-0-g5aa571dfc47b2fa92615ea5774475fa3650e8eb3

depends:
- freedesktop-sdk.bst:components/kmod.bst

build-depends:
- freedesktop-sdk.bst:bootstrap-import.bst
- freedesktop-sdk.bst:components/bison.bst
- freedesktop-sdk.bst:components/flex.bst
- freedesktop-sdk.bst:components/bc.bst
- freedesktop-sdk.bst:components/gzip.bst
- freedesktop-sdk.bst:components/openssl.bst

variables:
  bootdir: /boot
  kernel_arch: arm64
  image-name: arch/arm64/boot/Image

environment:
  ARCH: '%{kernel_arch}'

config:
  configure-commands:
  - make clean defconfig
  
  - |
    scripts/config -e  SYSVIPC
    scripts/config -e  POSIX_MQUEUE
    scripts/config -e  NO_HZ
    scripts/config -e  HIGH_RES_TIMERS
    scripts/config -e  PREEMPT_VOLUNTARY
    scripts/config -e  BSD_PROCESS_ACCT
    scripts/config -e  BSD_PROCESS_ACCT_V3
    scripts/config -e  TASKSTATS
    scripts/config -e  TASK_DELAY_ACCT
    scripts/config -e  TASK_XACCT
    scripts/config -e  TASK_IO_ACCOUNTING
    scripts/config -e  MEMCG
    scripts/config -e  BLK_CGROUP
    scripts/config -e  CFS_BANDWIDTH
    scripts/config -e  RT_GROUP_SCHED
    scripts/config -e  CGROUP_PIDS
    scripts/config -e  CGROUP_FREEZER
    scripts/config -e  CPUSETS
    scripts/config -e  CGROUP_DEVICE
    scripts/config -e  CGROUP_CPUACCT
    scripts/config -e  CGROUP_BPF
    scripts/config -e  USER_NS
    scripts/config -e  SCHED_AUTOGROUP
    scripts/config -e  BOOT_CONFIG
    scripts/config -e  BPF_SYSCALL
    scripts/config -e  BPF_JIT_ALWAYS_ON
    scripts/config -e  PERF_EVENTS
    scripts/config -e  ARCH_SUNXI
    scripts/config -e  SCHED_MC
    scripts/config -e  COMPAT
    scripts/config -e  PM_AUTOSLEEP
    scripts/config -e  PM_WAKELOCKS
    scripts/config -e  PM_DEBUG
    scripts/config -e  WQ_POWER_EFFICIENT_DEFAULT
    scripts/config -e  ENERGY_MODEL
    scripts/config -e  CPU_IDLE
    scripts/config -e  CPU_IDLE_GOV_LADDER
    scripts/config -e  ARM_CPUIDLE
    scripts/config -e  ARM_PSCI_CPUIDLE
    scripts/config -e  CPU_FREQ
    scripts/config -e  CPU_FREQ_STAT
    scripts/config -e  CPU_FREQ_DEFAULT_GOV_PERFORMANCE
    scripts/config -e  CPU_FREQ_GOV_POWERSAVE
    scripts/config -e  CPU_FREQ_GOV_USERSPACE
    scripts/config -e  CPU_FREQ_GOV_ONDEMAND
    scripts/config -e  CPU_FREQ_GOV_CONSERVATIVE
    scripts/config -e  CPU_FREQ_GOV_SCHEDUTIL
    scripts/config -e  CPUFREQ_DT
    scripts/config -e  ARM_SCPI_PROTOCOL
    scripts/config -m  CRYPTO_SHA1_ARM64_CE
    scripts/config -m  CRYPTO_SHA2_ARM64_CE
    scripts/config -m  CRYPTO_SHA512_ARM64_CE
    scripts/config -m  CRYPTO_SHA3_ARM64
    scripts/config -m  CRYPTO_SM3_ARM64_CE
    scripts/config -m  CRYPTO_SM4_ARM64_CE
    scripts/config -m  CRYPTO_GHASH_ARM64_CE
    scripts/config -m  CRYPTO_CRCT10DIF_ARM64_CE
    scripts/config -m  CRYPTO_AES_ARM64_CE_CCM
    scripts/config -m  CRYPTO_AES_ARM64_CE_BLK
    scripts/config -m  CRYPTO_AES_ARM64_BS
    scripts/config -e  JUMP_LABEL
    scripts/config -e  MODULES
    scripts/config -e  MODULE_UNLOAD
    scripts/config -e  MODVERSIONS
    scripts/config -e  BLK_DEV_THROTTLING
    scripts/config -e  BLK_WBT
    scripts/config -e  BLK_CGROUP_IOLATENCY
    scripts/config -e  BLK_CGROUP_IOCOST
    scripts/config -e  PARTITION_ADVANCED
    scripts/config -e  IOSCHED_BFQ
    scripts/config -e  BFQ_GROUP_IOSCHED
    scripts/config -e  CMA
    scripts/config -e  CMA_DEBUGFS
    scripts/config -e  ZPOOL
    scripts/config -e  ZBUD
    scripts/config -e  Z3FOLD
    scripts/config -e  ZSMALLOC
    scripts/config -e  NET
    scripts/config -e  PACKET
    scripts/config -e  PACKET_DIAG
    scripts/config -e  UNIX
    scripts/config -e  UNIX_DIAG
    scripts/config -e  XFRM_USER
    scripts/config -m  NET_KEY
    scripts/config -e  INET
    scripts/config -e  IP_MULTICAST
    scripts/config -e  IP_ADVANCED_ROUTER
    scripts/config -e  SYN_COOKIES
    scripts/config -e  MPTCP
    scripts/config -e  NETFILTER
    scripts/config -m  NETFILTER_NETLINK_QUEUE
    scripts/config -m  NETFILTER_NETLINK_LOG
    scripts/config -m  NF_CONNTRACK
    scripts/config -m  NF_LOG_NETDEV
    scripts/config -e  NF_CONNTRACK_MARK
    scripts/config -m  NF_CONNTRACK_FTP
    scripts/config -m  NF_CONNTRACK_H323
    scripts/config -m  NF_CONNTRACK_IRC
    scripts/config -m  NF_CONNTRACK_NETBIOS_NS
    scripts/config -m  NF_CONNTRACK_SNMP
    scripts/config -m  NF_CONNTRACK_PPTP
    scripts/config -m  NF_CONNTRACK_SIP
    scripts/config -m  NF_CONNTRACK_TFTP
    scripts/config -m  NF_CT_NETLINK
    scripts/config -e  NETFILTER_NETLINK_GLUE_CT
    scripts/config -m  NF_TABLES
    scripts/config -e  NF_TABLES_INET
    scripts/config -e  NF_TABLES_NETDEV
    scripts/config -m  NFT_NUMGEN
    scripts/config -m  NFT_CT
    scripts/config -m  NFT_COUNTER
    scripts/config -m  NFT_CONNLIMIT
    scripts/config -m  NFT_LOG
    scripts/config -m  NFT_LIMIT
    scripts/config -m  NFT_MASQ
    scripts/config -m  NFT_REDIR
    scripts/config -m  NFT_NAT
    scripts/config -m  NFT_TUNNEL
    scripts/config -m  NFT_OBJREF
    scripts/config -m  NFT_QUEUE
    scripts/config -m  NFT_QUOTA
    scripts/config -m  NFT_REJECT
    scripts/config -m  NFT_HASH
    scripts/config -m  NFT_FIB_INET
    scripts/config -m  NFT_SOCKET
    scripts/config -m  NFT_OSF
    scripts/config -m  NFT_DUP_NETDEV
    scripts/config -m  NFT_FWD_NETDEV
    scripts/config -m  NF_FLOW_TABLE_INET
    scripts/config -m  NF_FLOW_TABLE
    scripts/config -m  IP_SET
    scripts/config -m  IP_SET_BITMAP_IP
    scripts/config -m  IP_SET_BITMAP_IPMAC
    scripts/config -m  IP_SET_BITMAP_PORT
    scripts/config -m  IP_SET_HASH_IP
    scripts/config -m  IP_SET_HASH_IPMARK
    scripts/config -m  IP_SET_HASH_IPPORT
    scripts/config -m  IP_SET_HASH_IPPORTIP
    scripts/config -m  IP_SET_HASH_IPPORTNET
    scripts/config -m  IP_SET_HASH_IPMAC
    scripts/config -m  IP_SET_HASH_MAC
    scripts/config -m  IP_SET_HASH_NETPORTNET
    scripts/config -m  IP_SET_HASH_NET
    scripts/config -m  IP_SET_HASH_NETNET
    scripts/config -m  IP_SET_HASH_NETPORT
    scripts/config -m  IP_SET_HASH_NETIFACE
    scripts/config -m  IP_SET_LIST_SET
    scripts/config -m  NFT_FIB_IPV4
    scripts/config -e  NF_TABLES_ARP
    scripts/config -m  NF_FLOW_TABLE_IPV4
    scripts/config -m  NF_LOG_ARP
    scripts/config -m  NF_LOG_IPV4
    scripts/config -m  NFT_DUP_IPV6
    scripts/config -m  NFT_FIB_IPV6
    scripts/config -m  NF_FLOW_TABLE_IPV6
    scripts/config -m  NF_LOG_IPV6
    scripts/config -e  BPFILTER
    scripts/config -e  BPFILTER_UMH
    scripts/config -e  NET_SCHED
    scripts/config -m  NET_SCH_CBQ
    scripts/config -m  NET_SCH_HTB
    scripts/config -m  NET_CLS_BASIC
    scripts/config -m  NET_CLS_ROUTE4
    scripts/config -m  NET_CLS_FW
    scripts/config -m  NET_CLS_CGROUP
    scripts/config -e  NET_CLS_ACT
    scripts/config -m  NET_ACT_POLICE
    scripts/config -m  NET_ACT_GACT
    scripts/config -m  NET_ACT_MIRRED
    scripts/config -m  NETLINK_DIAG
    scripts/config -e  BPF_JIT
    scripts/config -m  BT
    scripts/config -m  BT_RFCOMM
    scripts/config -e  BT_RFCOMM_TTY
    scripts/config -m  BT_BNEP
    scripts/config -e  BT_BNEP_MC_FILTER
    scripts/config -e  BT_BNEP_PROTO_FILTER
    scripts/config -m  BT_HIDP
    scripts/config -e  BT_HS
    scripts/config -e  BT_LEDS
    scripts/config -m  BT_HCIUART
    scripts/config -e  BT_HCIUART_RTL
    scripts/config -m  CFG80211
    scripts/config -e  CFG80211_DEBUGFS
    scripts/config -e  CFG80211_WEXT
    scripts/config -m  MAC80211
    scripts/config -e  MAC80211_LEDS
    scripts/config -m  RFKILL
    scripts/config -m  RFKILL_GPIO
    scripts/config -e  UEVENT_HELPER
    scripts/config -e  DEVTMPFS
    scripts/config -e  DEVTMPFS_MOUNT
    scripts/config -m  ZRAM
    scripts/config -e  ZRAM_WRITEBACK
    scripts/config -e  ZRAM_MEMORY_TRACKING
    scripts/config -m  BLK_DEV_LOOP
    scripts/config -m  BLK_DEV_NBD
    scripts/config -m  MODEM_POWER
    scripts/config -m  SCSI
    scripts/config -m  BLK_DEV_SD
    scripts/config -e  MD
    scripts/config -e  BLK_DEV_DM
    scripts/config -e  DM_CRYPT
    scripts/config -e  DM_INIT
    scripts/config -e  DM_UEVENT
    scripts/config -e  NETDEVICES
    scripts/config -m  WIREGUARD
    scripts/config -m  TUN
    scripts/config -m  VETH
    scripts/config -m  PPP
    scripts/config -m  PPP_BSDCOMP
    scripts/config -m  PPP_DEFLATE
    scripts/config -e  PPP_FILTER
    scripts/config -m  PPP_MPPE
    scripts/config -m  USB_RTL8152
    scripts/config -m  USB_USBNET
    scripts/config -m  USB_NET_CDC_EEM
    scripts/config -m  USB_NET_CDC_MBIM
    scripts/config -m  USB_NET_QMI_WWAN
    scripts/config -e  INPUT_POLLDEV
    scripts/config -m  INPUT_MOUSEDEV
    scripts/config -e  INPUT_MOUSEDEV_PSAUX
    scripts/config -e  INPUT_EVDEV
    scripts/config -e  KEYBOARD_GPIO
    scripts/config -e  KEYBOARD_GPIO_POLLED
    scripts/config -e  KEYBOARD_SUN4I_LRADC
    scripts/config -e  INPUT_TOUCHSCREEN
    scripts/config -m  TOUCHSCREEN_GOODIX
    scripts/config -e  INPUT_MISC
    scripts/config -e  INPUT_GPIO_VIBRA
    scripts/config -e  INPUT_AXP20X_PEK
    scripts/config -e  INPUT_UINPUT
    scripts/config -e  SERIAL_8250
    scripts/config -e  SERIAL_8250_CONSOLE
    scripts/config -e  SERIAL_8250_DW
    scripts/config -e  SERIAL_OF_PLATFORM
    scripts/config -e  SERIAL_DEV_BUS
    scripts/config -e  I2C_CHARDEV
    scripts/config -e  I2C_MUX
    scripts/config -e  I2C_GPIO
    scripts/config -e  I2C_MV64XXX
    scripts/config -e  PINCTRL_AXP209
    scripts/config -e  PINCTRL_SINGLE
    scripts/config -e  GPIO_SYSFS
    scripts/config -e  CHARGER_AXP20X
    scripts/config -e  BATTERY_AXP20X
    scripts/config -e  AXP20X_POWER
    scripts/config -e  THERMAL
    scripts/config -e  THERMAL_STATISTICS
    scripts/config -e  THERMAL_WRITABLE_TRIPS
    scripts/config -e  THERMAL_GOV_FAIR_SHARE
    scripts/config -e  THERMAL_GOV_BANG_BANG
    scripts/config -e  CPU_THERMAL
    scripts/config -e  SUN8I_THERMAL
    scripts/config -e  WATCHDOG
    scripts/config -e  SUNXI_WATCHDOG
    scripts/config -e  MFD_SUN4I_GPADC
    scripts/config -e  MFD_AXP20X_RSB
    scripts/config -e  MFD_SYSCON
    scripts/config -e  REGULATOR
    scripts/config -e  REGULATOR_FIXED_VOLTAGE
    scripts/config -e  REGULATOR_AXP20X
    scripts/config -e  REGULATOR_GPIO
    scripts/config -m  MEDIA_SUPPORT
    scripts/config -e  MEDIA_CAMERA_SUPPORT
    scripts/config -e  MEDIA_PLATFORM_SUPPORT
    scripts/config -m  V4L2_FLASH_LED_CLASS
    scripts/config -e  V4L_PLATFORM_DRIVERS
    scripts/config -m  VIDEO_SUN6I_CSI
    scripts/config -e  V4L_MEM2MEM_DRIVERS
    scripts/config -m  VIDEO_MEM2MEM_DEINTERLACE
    scripts/config -m  VIDEO_SUN8I_DEINTERLACE
    scripts/config -m  VIDEO_SUN8I_ROTATE
    scripts/config -m  VIDEO_OV5640
    scripts/config -m  VIDEO_GC2145
    scripts/config -e  DRM
    scripts/config -e  DRM_LOAD_EDID_FIRMWARE
    scripts/config -e  DRM_SUN4I
    scripts/config -e  DRM_SUN6I_DSI
    scripts/config -e  DRM_SUN8I_DW_HDMI
    scripts/config -e  DRM_SUN8I_MIXER
    scripts/config -e  DRM_PANEL_ILITEK_ILI9881C
    scripts/config -e  DRM_PANEL_SITRONIX_ST7703
    scripts/config -m  DRM_DW_HDMI_AHB_AUDIO
    scripts/config -m  DRM_DW_HDMI_I2S_AUDIO
    scripts/config -e  DRM_DW_HDMI_CEC
    scripts/config -m  DRM_LIMA
    scripts/config -e  FB_SIMPLE
    scripts/config -e  BACKLIGHT_CLASS_DEVICE
    scripts/config -e  BACKLIGHT_PWM
    scripts/config -e  FRAMEBUFFER_CONSOLE_ROTATION
    scripts/config -e  FRAMEBUFFER_CONSOLE_DEFERRED_TAKEOVER
    scripts/config -m  SOUND
    scripts/config -m  SND
    scripts/config -e  SND_OSSEMUL
    scripts/config -m  SND_MIXER_OSS
    scripts/config -m  SND_PCM_OSS
    scripts/config -m  SND_HRTIMER
    scripts/config -m  SND_SEQUENCER
    scripts/config -m  SND_SEQ_DUMMY
    scripts/config -m  SND_SEQUENCER_OSS
    scripts/config -m  SND_ALOOP
    scripts/config -m  SND_USB_AUDIO
    scripts/config -m  SND_SOC
    scripts/config -m  SND_SUN4I_CODEC
    scripts/config -m  SND_SUN8I_CODEC
    scripts/config -m  SND_SUN8I_CODEC_ANALOG
    scripts/config -m  SND_SUN50I_CODEC_ANALOG
    scripts/config -m  SND_SUN4I_I2S
    scripts/config -m  SND_SUN4I_SPDIF
    scripts/config -m  SND_SOC_BT_SCO
    scripts/config -m  SND_SOC_EC25
    scripts/config -m  SND_SOC_SIMPLE_AMPLIFIER
    scripts/config -m  SND_SIMPLE_CARD
    scripts/config -m  SND_AUDIO_GRAPH_CARD
    scripts/config -m  HID
    scripts/config -e  USB_HIDDEV
    scripts/config -e  USB_LED_TRIG
    scripts/config -m  USB
    scripts/config -e  USB_ANNOUNCE_NEW_DEVICES
    scripts/config -e  USB_OTG
    scripts/config -m  USB_OTG_FSM
    scripts/config -m  USB_LEDS_TRIGGER_USBPORT
    scripts/config -m  USB_MON
    scripts/config -m  USB_EHCI_HCD
    scripts/config -m  USB_EHCI_HCD_PLATFORM
    scripts/config -m  USB_OHCI_HCD
    scripts/config -m  USB_OHCI_HCD_PLATFORM
    scripts/config -m  USB_ACM
    scripts/config -m  USB_STORAGE
    scripts/config -m  USB_UAS
    scripts/config -m  USBIP_CORE
    scripts/config -m  USBIP_VHCI_HCD
    scripts/config -m  USBIP_HOST
    scripts/config -m  USBIP_VUDC
    scripts/config -m  USB_MUSB_HDRC
    scripts/config -m  USB_MUSB_SUNXI
    scripts/config -e  MUSB_PIO_ONLY
    scripts/config -m  USB_SERIAL
    scripts/config -m  USB_SERIAL_SIMPLE
    scripts/config -m  USB_SERIAL_CH341
    scripts/config -m  USB_SERIAL_CP210X
    scripts/config -m  USB_SERIAL_FTDI_SIO
    scripts/config -m  USB_SERIAL_QCAUX
    scripts/config -m  USB_SERIAL_QUALCOMM
    scripts/config -m  USB_SERIAL_OPTION
    scripts/config -m  NOP_USB_XCEIV
    scripts/config -m  USB_GADGET
    scripts/config -e  U_SERIAL_CONSOLE
    scripts/config -m  USB_CONFIGFS
    scripts/config -e  USB_CONFIGFS_SERIAL
    scripts/config -e  USB_CONFIGFS_ACM
    scripts/config -e  USB_CONFIGFS_OBEX
    scripts/config -e  USB_CONFIGFS_NCM
    scripts/config -e  USB_CONFIGFS_ECM
    scripts/config -e  USB_CONFIGFS_ECM_SUBSET
    scripts/config -e  USB_CONFIGFS_RNDIS
    scripts/config -e  USB_CONFIGFS_EEM
    scripts/config -e  USB_CONFIGFS_MASS_STORAGE
    scripts/config -e  USB_CONFIGFS_F_LB_SS
    scripts/config -e  USB_CONFIGFS_F_FS
    scripts/config -e  USB_CONFIGFS_F_UAC1
    scripts/config -e  USB_CONFIGFS_F_UAC2
    scripts/config -e  USB_CONFIGFS_F_MIDI
    scripts/config -e  USB_CONFIGFS_F_HID
    scripts/config -e  USB_CONFIGFS_F_UVC
    scripts/config -e  USB_CONFIGFS_F_PRINTER
    scripts/config -m  USB_AUDIO
    scripts/config -m  USB_ETH
    scripts/config -e  USB_ETH_EEM
    scripts/config -m  USB_G_NCM
    scripts/config -m  USB_GADGETFS
    scripts/config -m  USB_FUNCTIONFS
    scripts/config -e  USB_FUNCTIONFS_ETH
    scripts/config -e  USB_FUNCTIONFS_RNDIS
    scripts/config -e  USB_FUNCTIONFS_GENERIC
    scripts/config -m  USB_MASS_STORAGE
    scripts/config -m  USB_G_SERIAL
    scripts/config -m  USB_MIDI_GADGET
    scripts/config -m  USB_G_PRINTER
    scripts/config -m  USB_CDC_COMPOSITE
    scripts/config -m  USB_G_ACM_MS
    scripts/config -m  USB_G_MULTI
    scripts/config -e  USB_G_MULTI_CDC
    scripts/config -m  USB_G_HID
    scripts/config -m  USB_G_WEBCAM
    scripts/config -m  USB_RAW_GADGET
    scripts/config -e  TYPEC
    scripts/config -m  TYPEC_TCPM
    scripts/config -m  TYPEC_TCPCI
    scripts/config -m  TYPEC_UCSI
    scripts/config -m  TYPEC_ANX7688
    scripts/config -m  TYPEC_DP_ALTMODE
    scripts/config -e  MMC
    scripts/config -e  MMC_SUNXI
    scripts/config -e  NEW_LEDS
    scripts/config -e  LEDS_CLASS
    scripts/config -e  LEDS_CLASS_FLASH
    scripts/config -e  LEDS_GPIO
    scripts/config -m  LEDS_SGM3140
    scripts/config -e  LEDS_TRIGGER_TIMER
    scripts/config -e  LEDS_TRIGGER_ONESHOT
    scripts/config -e  LEDS_TRIGGER_HEARTBEAT
    scripts/config -e  LEDS_TRIGGER_CPU
    scripts/config -e  LEDS_TRIGGER_ACTIVITY
    scripts/config -e  LEDS_TRIGGER_GPIO
    scripts/config -e  LEDS_TRIGGER_DEFAULT_ON
    scripts/config -m  LEDS_TRIGGER_TRANSIENT
    scripts/config -m  LEDS_TRIGGER_CAMERA
    scripts/config -e  LEDS_TRIGGER_PANIC
    scripts/config -e  LEDS_TRIGGER_NETDEV
    scripts/config -e  LEDS_TRIGGER_PATTERN
    scripts/config -e  RTC_CLASS
    scripts/config -e  RTC_DRV_SUN6I
    scripts/config -e  DMADEVICES
    scripts/config -e  DMA_SUN6I
    scripts/config -e  DMABUF_HEAPS
    scripts/config -e  DMABUF_HEAPS_SYSTEM
    scripts/config -e  DMABUF_HEAPS_CMA
    scripts/config -e  STAGING
    scripts/config -e  STAGING_MEDIA
    scripts/config -e  VIDEO_SUNXI
    scripts/config -m  VIDEO_SUNXI_CEDRUS
    scripts/config -e  ASHMEM
    scripts/config -m  RTL8723CS
    scripts/config -e  MAILBOX
    scripts/config -e  IOMMU_IO_PGTABLE_LPAE
    scripts/config -m  DEVFREQ_GOV_PERFORMANCE
    scripts/config -m  DEVFREQ_GOV_POWERSAVE
    scripts/config -m  DEVFREQ_GOV_USERSPACE
    scripts/config -m  DEVFREQ_GOV_PASSIVE
    scripts/config -e  PM_DEVFREQ_EVENT
    scripts/config -e  IIO
    scripts/config -m  IIO_BUFFER_CB
    scripts/config -m  IIO_BUFFER_HW_CONSUMER
    scripts/config -m  IIO_SW_DEVICE
    scripts/config -m  IIO_SW_TRIGGER
    scripts/config -e  AXP20X_ADC
    scripts/config -m  INV_MPU6050_I2C
    scripts/config -m  STK3310
    scripts/config -m  IIO_ST_MAGN_3AXIS
    scripts/config -m  IIO_HRTIMER_TRIGGER
    scripts/config -m  IIO_INTERRUPT_TRIGGER
    scripts/config -m  IIO_SYSFS_TRIGGER
    scripts/config -e  PWM
    scripts/config -e  PWM_SUN4I
    scripts/config -e  PHY_SUN4I_USB
    scripts/config -e  ARM_CCI_PMU
    scripts/config -e  ANDROID
    scripts/config -e  ANDROID_BINDER_IPC
    scripts/config -e  ANDROID_BINDERFS
    scripts/config -e  ANDROID_BINDER_IPC_SELFTEST
    scripts/config -e  NVMEM_SUNXI_SID
    scripts/config -e  VALIDATE_FS_PARSER
    scripts/config -e  EXT4_FS
    scripts/config -e  EXT4_FS_POSIX_ACL
    scripts/config -m  XFS_FS
    scripts/config -e  XFS_POSIX_ACL
    scripts/config -e  BTRFS_FS
    scripts/config -e  BTRFS_FS_POSIX_ACL
    scripts/config -m  NILFS2_FS
    scripts/config -e  F2FS_FS
    scripts/config -e  F2FS_FS_SECURITY
    scripts/config -e  F2FS_CHECK_FS
    scripts/config -e  F2FS_FS_COMPRESSION
    scripts/config -e  FS_ENCRYPTION
    scripts/config -e  FANOTIFY
    scripts/config -m  AUTOFS_FS
    scripts/config -m  FUSE_FS
    scripts/config -m  CUSE
    scripts/config -m  OVERLAY_FS
    scripts/config -e  OVERLAY_FS_INDEX
    scripts/config -e  OVERLAY_FS_METACOPY
    scripts/config -e  VFAT_FS
    scripts/config -e  PROC_CHILDREN
    scripts/config -e  TMPFS
    scripts/config -e  TMPFS_POSIX_ACL
    scripts/config -e  CONFIGFS_FS
    scripts/config -m  ECRYPT_FS
    scripts/config -e  ECRYPT_FS_MESSAGING
    scripts/config -m  SQUASHFS
    scripts/config -e  SQUASHFS_FILE_DIRECT
    scripts/config -e  SQUASHFS_DECOMP_MULTI
    scripts/config -e  SQUASHFS_XATTR
    scripts/config -e  SQUASHFS_LZ4
    scripts/config -e  SQUASHFS_LZO
    scripts/config -e  SQUASHFS_XZ
    scripts/config -e  SQUASHFS_ZSTD
    scripts/config -e  NLS_CODEPAGE_437
    scripts/config -e  NLS_CODEPAGE_852
    scripts/config -e  NLS_ISO8859_1
    scripts/config -e  NLS_ISO8859_2
    scripts/config -e  NLS_UTF8
    scripts/config -e  PERSISTENT_KEYRINGS
    scripts/config -e  ENCRYPTED_KEYS
    scripts/config -m  CRYPTO_USER
    scripts/config -m  CRYPTO_PCRYPT
    scripts/config -e  CRYPTO_CRYPTD
    scripts/config -m  CRYPTO_CURVE25519
    scripts/config -m  CRYPTO_CHACHA20POLY1305
    scripts/config -m  CRYPTO_SEQIV
    scripts/config -m  CRYPTO_ECHAINIV
    scripts/config -m  CRYPTO_BLAKE2S
    scripts/config -m  CRYPTO_MD4
    scripts/config -e  CRYPTO_SHA1
    scripts/config -e  CRYPTO_SHA3
    scripts/config -e  CRYPTO_SM3
    scripts/config -m  CRYPTO_ARC4
    scripts/config -m  CRYPTO_SALSA20
    scripts/config -e  CRYPTO_SM4
    scripts/config -e  CRYPTO_DEFLATE
    scripts/config -e  CRYPTO_LZO
    scripts/config -e  CRYPTO_LZ4
    scripts/config -e  CRYPTO_ZSTD
    scripts/config -m  CRYPTO_ANSI_CPRNG
    scripts/config -m  CRYPTO_USER_API_HASH
    scripts/config -m  CRYPTO_USER_API_SKCIPHER
    scripts/config -m  CRYPTO_USER_API_RNG
    scripts/config -m  CRYPTO_USER_API_AEAD
    scripts/config -m  CRYPTO_DEV_SUN8I_CE
    scripts/config -m  PKCS8_PRIVATE_KEY_PARSER
    scripts/config -e  CRC_T10DIF
    scripts/config -e  DMA_CMA
    scripts/config -e  DYNAMIC_DEBUG
    scripts/config -e  MAGIC_SYSRQ
    scripts/config -e  DEBUG_FS
    scripts/config -e  STACKTRACE
    

  build-commands:
  - make -j$(nproc)

  install-commands:
  - install -Dm644 "%{image-name}" '%{install-root}%{bootdir}/vmlinuz'
  - install -Dm644 System.map '%{install-root}%{bootdir}/System.map'
  - make INSTALL_MOD_PATH='%{install-root}%{prefix}' modules_install
  - rm %{install-root}%{indep-libdir}/modules/*/{source,build}
  - make INSTALL_DTBS_PATH='%{install-root}%{bootdir}/dtbs' dtbs_install

public:
  bst:
    integration-commands:
    - |
      cd '%{indep-libdir}/modules'
      for version in *; do
        depmod -b '%{prefix}' -a "$version";
      done

    split-rules:
      devel:
        (>):
        - '%{bootdir}/System.map'
