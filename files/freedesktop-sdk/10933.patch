From c0866927a0c72346b3c1dcf4835fa42e606ec5b1 Mon Sep 17 00:00:00 2001
From: Abderrahim Kitouni <akitouni@gnome.org>
Date: Mon, 26 Dec 2022 08:00:39 +0100
Subject: [PATCH] Update elements/components/fontconfig.bst to 2.14.1-0

Updates elements/components/fontconfig.bst to 2.14.1-0 (c45e09d)
Previous version was 2.14.0-0 (911b19f)
---
 elements/components/fontconfig.bst      |  4 +--
 patches/fontconfig/font-remapping.patch | 40 -------------------------
 2 files changed, 1 insertion(+), 43 deletions(-)
 delete mode 100644 patches/fontconfig/font-remapping.patch

diff --git a/elements/components/fontconfig.bst b/elements/components/fontconfig.bst
index 9278609e0e..28988ceba5 100644
--- a/elements/components/fontconfig.bst
+++ b/elements/components/fontconfig.bst
@@ -38,8 +38,6 @@ sources:
   track: main
   exclude:
   - 2.*.9*
-  ref: 2.14.0-0-g911b19f19f1334d51c452756f9ce222c1101097b
+  ref: 2.14.1-0-gc45e09df1ef235d653d56aef05012f6a3cc57979
 - kind: local
   path: files/fontconfig-flatpak.conf
-- kind: patch
-  path: patches/fontconfig/font-remapping.patch
diff --git a/patches/fontconfig/font-remapping.patch b/patches/fontconfig/font-remapping.patch
deleted file mode 100644
index fe250e3252..0000000000
--- a/patches/fontconfig/font-remapping.patch
+++ /dev/null
@@ -1,40 +0,0 @@
-From fc0e9a78d2fe3b26f0b93c2a99b160e75e2a9f89 Mon Sep 17 00:00:00 2001
-From: Akira TAGOH <akira@tagoh.org>
-Date: Wed, 28 Sep 2022 21:39:09 +0900
-Subject: [PATCH 1/2] Real fix of 91114d18c
-
-The change in 91114d18c broke remapping font paths.
-
-Patch from Mattias Clasen
-
-Fixes https://gitlab.freedesktop.org/fontconfig/fontconfig/-/issues/331
----
- src/fcstr.c | 6 +-----
- 1 file changed, 1 insertion(+), 5 deletions(-)
-
-diff --git a/src/fcstr.c b/src/fcstr.c
-index 3fe518f7..5ce65da0 100644
---- a/src/fcstr.c
-+++ b/src/fcstr.c
-@@ -1467,7 +1467,6 @@ FcStrSetAddFilenamePairWithSalt (FcStrSet *set, const FcChar8 *a, const FcChar8
- {
-     FcChar8 *new_a = NULL;
-     FcChar8 *new_b = NULL;
--    FcChar8 *rs = NULL;
-     FcBool  ret;
- 
-     if (a)
-@@ -1487,10 +1486,7 @@ FcStrSetAddFilenamePairWithSalt (FcStrSet *set, const FcChar8 *a, const FcChar8
- 	}
-     }
-     /* Override maps with new one if exists */
--    if (FcStrSetMemberAB (set, new_a, new_b, &rs))
--    {
--	FcStrSetDel (set, rs);
--    }
-+    FcStrSetDel (set, new_a);
-     ret = FcStrSetAddTriple (set, new_a, new_b, salt);
-     if (new_a)
- 	FcStrFree (new_a);
--- 
-GitLab
-- 
GitLab

