From 3c83706e2c3bd0588d541ff735f42c2c9ee355c7 Mon Sep 17 00:00:00 2001
From: Jordan Petridis <jordan@centricular.com>
Date: Thu, 15 Sep 2022 16:17:31 +0300
Subject: [PATCH] components/polkit: Move the initial script from -base to
 polkit.bst

Close #1475
---
 elements/components/polkit-base.bst | 6 ------
 elements/components/polkit.bst      | 8 ++++++++
 2 files changed, 8 insertions(+), 6 deletions(-)

diff --git a/elements/components/polkit-base.bst b/elements/components/polkit-base.bst
index dd7365972..fb99ff1eb 100644
--- a/elements/components/polkit-base.bst
+++ b/elements/components/polkit-base.bst
@@ -31,12 +31,6 @@ config:
       install -D -m 644 extra/sysusers.conf %{install-root}/$SYSUSERSDIR/polkit.conf
 
 public:
-  initial-script:
-    script: |
-      #!/bin/bash
-      sysroot="${1}"
-      chmod 4755 "${sysroot}%{indep-libdir}/polkit-1/polkit-agent-helper-1"
-      chmod 4755 "${sysroot}%{bindir}/pkexec"
   cpe:
     patches:
     - CVE-2021-4034
diff --git a/elements/components/polkit.bst b/elements/components/polkit.bst
index 4f0dc6a8c..128bb572a 100644
--- a/elements/components/polkit.bst
+++ b/elements/components/polkit.bst
@@ -12,3 +12,11 @@ config:
   exclude:
   - polkit-gobject
   include-orphans: true
+
+public:
+  initial-script:
+    script: |
+      #!/bin/bash
+      sysroot="${1}"
+      chmod 4755 "${sysroot}%{indep-libdir}/polkit-1/polkit-agent-helper-1"
+      chmod 4755 "${sysroot}%{bindir}/pkexec"
-- 
2.37.2

