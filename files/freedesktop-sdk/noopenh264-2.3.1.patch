From 7c2285957e245f5b3943a6f372ed8444cf19f2ee Mon Sep 17 00:00:00 2001
From: Michael Catanzaro <mcatanzaro@redhat.com>
Date: Wed, 5 Oct 2022 11:35:57 -0500
Subject: [PATCH] Update to OpenH264 2.3.1

---
 elements/components/noopenh264.bst | 13 +++----------
 include/repo_branches.yml          |  2 +-
 2 files changed, 4 insertions(+), 11 deletions(-)

diff --git a/elements/components/noopenh264.bst b/elements/components/noopenh264.bst
index 90e2feaa6..6a8b8b218 100644
--- a/elements/components/noopenh264.bst
+++ b/elements/components/noopenh264.bst
@@ -28,9 +28,6 @@ config:
     - |
       rm %{install-root}%{extlibdir}/libopenh264.a
 
-    - |
-      ln -srL %{install-root}%{libdir}/libopenh264.so %{install-root}%{libdir}/libopenh264.so.5 
-
 public:
   bst:
     split-rules:
@@ -41,13 +38,9 @@ public:
 
 sources:
 - kind: git_tag
-  url: github:endlessm/noopenh264.git
-  track: master
-  # There is no tag for 2.2.0
-  # This is a tag for 2.3.0 but the patches revert the version back to 2.2.0
+  url: github:mcatanzaro/noopenh264.git
+  track: mcatanzaro/2.3.1
   track-tags: false
-  ref: Version_2.3.0-0-g750147f1e5af5cd9f47ffabef996c335b1ba0481
+  ref: Version_2.3.0+really2.2.0-3-g7c7f55a34108867b93783bc7124779d6a3bbf4aa
   exclude:
   - Release*
-- kind: patch_queue
-  path: patches/noopenh264
diff --git a/include/repo_branches.yml b/include/repo_branches.yml
index 487b52b76..f61394c32 100644
--- a/include/repo_branches.yml
+++ b/include/repo_branches.yml
@@ -3,4 +3,4 @@
 #
 freedesktop-sdk-flatpak-branch: '22.08'
 freedesktop-sdk-snap-branch: '2208'
-openh264-version: '2.2.0'
+openh264-version: '2.3.1'
-- 
2.37.3

