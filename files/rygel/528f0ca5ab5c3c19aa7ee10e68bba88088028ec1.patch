From 528f0ca5ab5c3c19aa7ee10e68bba88088028ec1 Mon Sep 17 00:00:00 2001
From: Jens Georg <mail@jensge.org>
Date: Thu, 10 Jun 2021 21:59:05 +0200
Subject: [PATCH] media-export: Adapt to GUPnP vapi changes

---
 meson.build                                                   | 4 ++--
 .../media-export/rygel-media-export-dvd-container.vala        | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/meson.build b/meson.build
index 48301dce..ee612921 100644
--- a/meson.build
+++ b/meson.build
@@ -76,7 +76,7 @@ gtkdoc = dependency('gtk-doc', required : false)
 
 glib_minimal_version = '>= 2.56'
 
-gupnp = dependency('gupnp-1.2', version : '>= 1.1')
+gupnp = dependency('gupnp-1.2', version : '>= 1.3')
 gee = dependency('gee-0.8', version: '>= 0.8.0')
 gssdp = dependency('gssdp-1.2', version : '>= 1.1')
 glib = dependency('glib-2.0', version : glib_minimal_version)
diff --git a/src/plugins/media-export/rygel-media-export-dvd-container.vala b/src/plugins/media-export/rygel-media-export-dvd-container.vala
index d1cb38b7..a692c30c 100644
--- a/src/plugins/media-export/rygel-media-export-dvd-container.vala
+++ b/src/plugins/media-export/rygel-media-export-dvd-container.vala
@@ -54,7 +54,7 @@ internal class Rygel.MediaExport.DVDContainer : SimpleContainer, UpdatableObject
                                         Xml.ParserOption.NOWARNING |
                                         Xml.ParserOption.NOBLANKS |
                                         Xml.ParserOption.NONET);
-        this.doc = new GUPnP.XMLDoc (doc);
+        this.doc = new GUPnP.XMLDoc ((owned) doc);
 
         var context = new Xml.XPath.Context (this.doc.get_doc ());
         var xpo = context.eval ("/lsdvd/track");
-- 
GitLab

