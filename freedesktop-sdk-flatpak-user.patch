commit 78b122e9c6f5e3814c720d85c2f1e45a44c46a42
Author: Valentin David <valentin.david@codethink.co.uk>
Date:   Wed Apr 22 13:23:01 2020 +0200

    Add missing flatpak user

diff --git a/elements/components/flatpak.bst b/elements/components/flatpak.bst
index ba0c38402..aeffb915c 100644
--- a/elements/components/flatpak.bst
+++ b/elements/components/flatpak.bst
@@ -44,3 +44,5 @@ sources:
     dbus-proxy:
       checkout: true
       url: github:flatpak/xdg-dbus-proxy.git
+- kind: patch
+  path: patches/flatpak/sysusers.patch
diff --git a/patches/flatpak/sysusers.patch b/patches/flatpak/sysusers.patch
new file mode 100644
index 000000000..f5c4b1cc9
--- /dev/null
+++ b/patches/flatpak/sysusers.patch
@@ -0,0 +1,57 @@
+commit ba7ad5818fee93ad55acf1aa55d67b011a024672
+Author: Valentin David <valentin.david@codethink.co.uk>
+Date:   Wed Apr 22 13:18:56 2020 +0200
+
+    Add sysusers.d configuration file
+    
+    This will make systemd create the system-helper user if it is missing.
+
+diff --git a/configure.ac b/configure.ac
+index e149e56a..2df13e61 100644
+--- a/configure.ac
++++ b/configure.ac
+@@ -342,6 +342,15 @@ AC_ARG_WITH(system-install-dir,
+ SYSTEM_INSTALL_DIR=$with_system_install_dir
+ AC_SUBST(SYSTEM_INSTALL_DIR)
+ 
++AC_ARG_WITH([sysusersdir],
++            [AS_HELP_STRING([--with-sysusersdir=DIR],
++                            [Directory for systemd sysusers.d configuration files (default=PREFIX/lib/sysusers.d)])],
++    [],
++    dnl This is deliberately not ${libdir}: systemd units always go in
++    dnl .../lib, never .../lib64 or .../lib/x86_64-linux-gnu
++    [with_sysusersdir='${prefix}/lib/sysusers.d'])
++AC_SUBST([sysusersdir], [$with_sysusersdir])
++
+ AC_ARG_WITH(system-helper-user,
+            [AS_HELP_STRING([--with-system-helper-user=USERNAME],
+                            [Name of the system helper user])],
+diff --git a/system-helper/Makefile.am.inc b/system-helper/Makefile.am.inc
+index 6152ec99..b9f041fc 100644
+--- a/system-helper/Makefile.am.inc
++++ b/system-helper/Makefile.am.inc
+@@ -35,8 +35,15 @@ polkit_policy_DATA =					\
+ %.policy: %.policy.in
+ 	$(AM_V_GEN) $(MSGFMT) --xml -d $(top_srcdir)/po --template $< -o $@ || cp $< $@
+ 
+-DISTCLEANFILES += system-helper/org.freedesktop.Flatpak.policy system-helper/org.freedesktop.Flatpak.rules system-helper/flatpak-system-helper.service system-helper/org.freedesktop.Flatpak.SystemHelper.service
++sysusers_DATA = system-helper/flatpak.conf
++
++%.conf: %.conf.in
++	$(AM_V_GEN) $(SED) \
++	  -e "s|\@SYSTEM_HELPER_USER\@|$(SYSTEM_HELPER_USER)|" \
++	  $< > $@
++
++DISTCLEANFILES += system-helper/org.freedesktop.Flatpak.policy system-helper/org.freedesktop.Flatpak.rules system-helper/flatpak-system-helper.service system-helper/org.freedesktop.Flatpak.SystemHelper.service system-helper/flatpak.conf
+ 
+ endif
+ 
+-EXTRA_DIST += system-helper/org.freedesktop.Flatpak.policy.in system-helper/org.freedesktop.Flatpak.SystemHelper.conf system-helper/org.freedesktop.Flatpak.rules.in system-helper/org.freedesktop.Flatpak.SystemHelper.service.in system-helper/flatpak-system-helper.service.in
++EXTRA_DIST += system-helper/org.freedesktop.Flatpak.policy.in system-helper/org.freedesktop.Flatpak.SystemHelper.conf system-helper/org.freedesktop.Flatpak.rules.in system-helper/org.freedesktop.Flatpak.SystemHelper.service.in system-helper/flatpak-system-helper.service.in system-helper/flatpak.conf.in
+diff --git a/system-helper/flatpak.conf.in b/system-helper/flatpak.conf.in
+new file mode 100644
+index 00000000..9cc212eb
+--- /dev/null
++++ b/system-helper/flatpak.conf.in
+@@ -0,0 +1 @@
++u @SYSTEM_HELPER_USER@ - "Flatpak system helper" -
