From b8e35ad4384263368579457a7bae9afe746a1eb6 Mon Sep 17 00:00:00 2001
From: Jordan Petridis <jpetridis@gnome.org>
Date: Thu, 31 Jul 2025 13:08:35 +0300
Subject: [PATCH 1/2] project: Specify more limits to the CAS configs

These are disabled by default due to backward compatibility
so we need to explicitly set some values for timeouts and
retry policies.

This also bumps the min-version to 2.5 which is when these
options were introduced.
---
 project.conf | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/project.conf b/project.conf
index 2f2fff66a3..485c0d9847 100644
--- a/project.conf
+++ b/project.conf
@@ -1,13 +1,13 @@
 name: freedesktop-sdk
 
-min-version: 2.3
+min-version: 2.5
 
 aliases:
   (@): include/_private/aliases.yml
 
 (@):
 - include/_private/mirrors.yml
 - include/runtime.yml
 
 element-path: elements
 
@@ -146,25 +146,31 @@ options:
 
   prod_keys:
     type: bool
     description: Use production boot keys
     default: False
 
 artifacts:
 - url: https://cache.freedesktop-sdk.io:11001
   connection-config:
     keepalive-time: 60
+    retry-limit: 5
+    retry-delay: 500
+    request-timeout: 180
 
 source-caches:
 - url: https://cache.freedesktop-sdk.io:11001
   connection-config:
     keepalive-time: 60
+    retry-limit: 5
+    retry-delay: 500
+    request-timeout: 180
 
 sandbox:
   build-arch: '%{target_arch}'
 
 elements:
   autotools:
     (@): include/_private/autotools-conf.yml
   cmake:
     (@): include/_private/cmake-conf.yml
   meson:
-- 
2.49.0

