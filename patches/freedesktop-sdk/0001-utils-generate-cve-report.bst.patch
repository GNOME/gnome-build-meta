From 4dd3a58f45bc99a1b490c37c6441ed6726862c98 Mon Sep 17 00:00:00 2001
From: Neill Whillans <neill.whillans@codethink.co.uk>
Date: Wed, 1 May 2024 12:37:26 +0000
Subject: [PATCH 1/3] Add element for generate_cve_report.py utility

Allows for the generate_cve_report.py utility script, and its
companion utility, update_local_cve_database.py, to be used
in other builds that make use of freedesktop-sdk.
---
 elements/utils/generate-cve-report.bst | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)
 create mode 100644 elements/utils/generate-cve-report.bst

diff --git a/elements/utils/generate-cve-report.bst b/elements/utils/generate-cve-report.bst
new file mode 100644
index 000000000..1d8163464
--- /dev/null
+++ b/elements/utils/generate-cve-report.bst
@@ -0,0 +1,22 @@
+kind: manual
+
+build-depends:
+- bootstrap-import.bst
+
+runtime-depends:
+- components/libversion.bst
+- components/python3.bst
+- components/python3-libversion.bst
+- components/python3-requests.bst
+
+config:
+  install-commands:
+  - |
+    install -Dm755 generate_cve_report.py '%{install-root}%{bindir}/generate_cve_report'
+    install -Dm755 update_local_cve_database.py '%{install-root}%{bindir}/update_local_cve_database'
+
+sources:
+- kind: local
+  path: utils/generate_cve_report.py
+- kind: local
+  path: utils/update_local_cve_database.py
-- 
2.39.2


From 5c7f1ed8a5a7a8a15838a3fae233cdec679f03d6 Mon Sep 17 00:00:00 2001
From: Neill Whillans <neill.whillans@codethink.co.uk>
Date: Thu, 2 May 2024 10:45:49 +0000
Subject: [PATCH 2/3] Add Shebangs to set python interpreter version in
 utilities

---
 utils/generate_cve_report.py       | 1 +
 utils/update_local_cve_database.py | 1 +
 2 files changed, 2 insertions(+)

diff --git a/utils/generate_cve_report.py b/utils/generate_cve_report.py
index bb9732601..c0cef25da 100644
--- a/utils/generate_cve_report.py
+++ b/utils/generate_cve_report.py
@@ -1,3 +1,4 @@
+#!/usr/bin/env python3
 """
 Downloads CVE database and generate HTML output with all current CVEs for a given manifest.
 
diff --git a/utils/update_local_cve_database.py b/utils/update_local_cve_database.py
index 732762d96..6c35ca2ae 100644
--- a/utils/update_local_cve_database.py
+++ b/utils/update_local_cve_database.py
@@ -1,3 +1,4 @@
+#!/usr/bin/env python3
 """
 Downloads CVE database
 
-- 
2.39.2


From ab407aa294f787f24e4e74cfcedfeb68de59f4b9 Mon Sep 17 00:00:00 2001
From: Neill Whillans <neill.whillans@codethink.co.uk>
Date: Thu, 2 May 2024 13:54:55 +0000
Subject: [PATCH 3/3] Add elements for libversion

Required by utils/generate-cve-report.bst
---
 elements/components/libversion.bst         | 13 +++++++++++++
 elements/components/python3-libversion.bst | 15 +++++++++++++++
 2 files changed, 28 insertions(+)
 create mode 100644 elements/components/libversion.bst
 create mode 100644 elements/components/python3-libversion.bst

diff --git a/elements/components/libversion.bst b/elements/components/libversion.bst
new file mode 100644
index 000000000..7ed1802b4
--- /dev/null
+++ b/elements/components/libversion.bst
@@ -0,0 +1,13 @@
+kind: cmake
+
+build-depends:
+- public-stacks/buildsystem-cmake.bst
+
+depends:
+- bootstrap-import.bst
+
+sources:
+- kind: git_repo
+  url: github:repology/libversion.git
+  track: '*.*.*'
+  ref: 3.0.3-0-gf851fec7d976820061952f6d90d3b60f2bae774b
diff --git a/elements/components/python3-libversion.bst b/elements/components/python3-libversion.bst
new file mode 100644
index 000000000..6dc7c6b7c
--- /dev/null
+++ b/elements/components/python3-libversion.bst
@@ -0,0 +1,15 @@
+kind: pyproject
+
+build-depends:
+- public-stacks/buildsystem-python-setuptools.bst
+- components/pkg-config.bst
+
+depends:
+- components/python3.bst
+- components/libversion.bst
+
+sources:
+- kind: git_repo
+  url: github:repology/py-libversion
+  track: '*.*.*'
+  ref: 1.2.4-0-g9350dfe00ea730d0fe5b5ecb6388c3a64633a431
-- 
2.39.2

